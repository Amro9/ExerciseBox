import * as sl from 'prosemirror-schema-list';
import { toStyleString } from 'ngx-editor/utils';
const doc = {
    content: 'block+',
};
// :: NodeSpec The text node.
const text = {
    group: 'inline',
};
// :: NodeSpec A plain paragraph textblock. Represented in the DOM
// as a `<p>` element.
const paragraph = {
    content: 'inline*',
    group: 'block',
    attrs: {
        align: {
            default: null,
        },
        indent: {
            default: null,
        },
    },
    parseDOM: [
        {
            tag: 'p',
            getAttrs(dom) {
                const { textAlign } = dom.style;
                const align = dom.getAttribute('align') || textAlign || null;
                const indent = dom.getAttribute('data-indent') || null;
                return {
                    align,
                    indent: parseInt(indent, 10) || null,
                };
            },
        },
    ],
    toDOM(node) {
        const { align, indent } = node.attrs;
        const styles = {
            textAlign: align !== 'left' ? align : null,
            marginLeft: indent !== null ? `${indent * 40}px` : null,
        };
        const style = toStyleString(styles) || null;
        const attrs = {
            style,
            'data-indent': indent ?? null,
        };
        return ['p', attrs, 0];
    },
};
// :: NodeSpec A blockquote (`<blockquote>`) wrapping one or more blocks.
const blockquote = {
    content: 'block+',
    group: 'block',
    defining: true,
    attrs: {
        indent: {
            default: null,
        },
    },
    parseDOM: [
        {
            tag: 'blockquote',
            getAttrs(dom) {
                const indent = dom.getAttribute('data-indent') || null;
                return {
                    indent: parseInt(indent, 10) || null,
                };
            },
        },
    ],
    toDOM(node) {
        const { indent } = node.attrs;
        const styles = {
            marginLeft: indent !== null ? `${indent * 40}px` : null,
        };
        const style = toStyleString(styles) || null;
        const attrs = {
            style,
            'data-indent': indent ?? null,
        };
        return ['blockquote', attrs, 0];
    },
};
// :: NodeSpec A horizontal rule (`<hr>`).
const horizontalRule = {
    group: 'block',
    parseDOM: [{ tag: 'hr' }],
    toDOM() {
        return ['hr'];
    },
};
// :: NodeSpec A heading textblock, with a `level` attribute that
// should hold the number 1 to 6. Parsed and serialized as `<h1>` to
// `<h6>` elements.
const heading = {
    attrs: {
        level: {
            default: 1,
        },
        align: {
            default: null,
        },
        indent: {
            default: null,
        },
    },
    content: 'inline*',
    group: 'block',
    defining: true,
    parseDOM: [
        {
            tag: 'h1',
            getAttrs(dom) {
                const { textAlign } = dom.style;
                const align = dom.getAttribute('align') || textAlign || null;
                const indent = dom.getAttribute('data-indent') || null;
                return {
                    level: 1,
                    align,
                    indent: parseInt(indent, 10) || null,
                };
            },
        },
        {
            tag: 'h2',
            getAttrs(dom) {
                const { textAlign } = dom.style;
                const align = dom.getAttribute('align') || textAlign || null;
                const indent = dom.getAttribute('data-indent') || null;
                return {
                    level: 2,
                    align,
                    indent: parseInt(indent, 10) || null,
                };
            },
        },
        {
            tag: 'h3',
            getAttrs(dom) {
                const { textAlign } = dom.style;
                const align = dom.getAttribute('align') || textAlign || null;
                const indent = dom.getAttribute('data-indent') || null;
                return {
                    level: 3,
                    align,
                    indent: parseInt(indent, 10) || null,
                };
            },
        },
        {
            tag: 'h4',
            getAttrs(dom) {
                const { textAlign } = dom.style;
                const align = dom.getAttribute('align') || textAlign || null;
                const indent = dom.getAttribute('data-indent') || null;
                return {
                    level: 4,
                    align,
                    indent: parseInt(indent, 10) || null,
                };
            },
        },
        {
            tag: 'h5',
            getAttrs(dom) {
                const { textAlign } = dom.style;
                const align = dom.getAttribute('align') || textAlign || null;
                const indent = dom.getAttribute('data-indent') || null;
                return {
                    level: 5,
                    align,
                    indent: parseInt(indent, 10) || null,
                };
            },
        },
        {
            tag: 'h6',
            getAttrs(dom) {
                const { textAlign } = dom.style;
                const align = dom.getAttribute('align') || textAlign || null;
                const indent = dom.getAttribute('data-indent') || null;
                return {
                    level: 6,
                    align,
                    indent: parseInt(indent, 10) || null,
                };
            },
        },
    ],
    toDOM(node) {
        const { level, align, indent } = node.attrs;
        const styles = {
            textAlign: align !== 'left' ? align : null,
            marginLeft: indent !== null ? `${indent * 40}px` : null,
        };
        const style = toStyleString(styles) || null;
        const attrs = {
            style,
            'data-indent': indent ?? null,
        };
        return [`h${level}`, attrs, 0];
    },
};
// :: NodeSpec A code listing. Disallows marks or non-text inline
// nodes by default. Represented as a `<pre>` element with a
// `<code>` element inside of it.
const codeBlock = {
    content: 'text*',
    marks: '',
    group: 'block',
    code: true,
    defining: true,
    parseDOM: [
        {
            tag: 'pre',
            preserveWhitespace: 'full',
        },
    ],
    toDOM() {
        return ['pre', ['code', 0]];
    },
};
// :: NodeSpec A hard line break, represented in the DOM as `<br>`.
const hardBreak = {
    inline: true,
    group: 'inline',
    selectable: false,
    parseDOM: [{ tag: 'br' }],
    toDOM() {
        return ['br'];
    },
};
// :: NodeSpec An inline image (`<img>`) node. Supports `src`,
// `alt`, and `href` attributes. The latter two default to the empty
// string.
export const image = {
    inline: true,
    attrs: {
        src: {},
        alt: { default: null },
        title: { default: null },
        width: { default: null },
    },
    group: 'inline',
    draggable: true,
    parseDOM: [
        {
            tag: 'img[src]',
            getAttrs(dom) {
                return {
                    src: dom.getAttribute('src'),
                    title: dom.getAttribute('title'),
                    alt: dom.getAttribute('alt'),
                    width: dom.getAttribute('width'),
                };
            },
        },
    ],
    toDOM(node) {
        const { src, alt, title, width } = node.attrs;
        return ['img', { src, alt, title, width }];
    },
};
const listItem = {
    ...sl.listItem,
    content: 'paragraph block*',
};
const orderedList = {
    ...sl.orderedList,
    content: 'list_item+',
    group: 'block',
};
const bulletList = {
    ...sl.bulletList,
    content: 'list_item+',
    group: 'block',
};
const nodes = {
    doc,
    text,
    paragraph,
    blockquote,
    horizontal_rule: horizontalRule,
    heading,
    hard_break: hardBreak,
    code_block: codeBlock,
    image,
    list_item: listItem,
    ordered_list: orderedList,
    bullet_list: bulletList,
};
export default nodes;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibm9kZXMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9wcm9qZWN0cy9uZ3gtZWRpdG9yL3NjaGVtYS9ub2Rlcy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFDQSxPQUFPLEtBQUssRUFBRSxNQUFNLHlCQUF5QixDQUFDO0FBRTlDLE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSxrQkFBa0IsQ0FBQztBQUVqRCxNQUFNLEdBQUcsR0FBYTtJQUNwQixPQUFPLEVBQUUsUUFBUTtDQUNsQixDQUFDO0FBRUYsNkJBQTZCO0FBQzdCLE1BQU0sSUFBSSxHQUFhO0lBQ3JCLEtBQUssRUFBRSxRQUFRO0NBQ2hCLENBQUM7QUFFRixrRUFBa0U7QUFDbEUsc0JBQXNCO0FBQ3RCLE1BQU0sU0FBUyxHQUFhO0lBQzFCLE9BQU8sRUFBRSxTQUFTO0lBQ2xCLEtBQUssRUFBRSxPQUFPO0lBQ2QsS0FBSyxFQUFFO1FBQ0wsS0FBSyxFQUFFO1lBQ0wsT0FBTyxFQUFFLElBQUk7U0FDZDtRQUNELE1BQU0sRUFBRTtZQUNOLE9BQU8sRUFBRSxJQUFJO1NBQ2Q7S0FDRjtJQUNELFFBQVEsRUFBRTtRQUNSO1lBQ0UsR0FBRyxFQUFFLEdBQUc7WUFDUixRQUFRLENBQUMsR0FBZ0I7Z0JBQ3ZCLE1BQU0sRUFBRSxTQUFTLEVBQUUsR0FBRyxHQUFHLENBQUMsS0FBSyxDQUFDO2dCQUNoQyxNQUFNLEtBQUssR0FBRyxHQUFHLENBQUMsWUFBWSxDQUFDLE9BQU8sQ0FBQyxJQUFJLFNBQVMsSUFBSSxJQUFJLENBQUM7Z0JBQzdELE1BQU0sTUFBTSxHQUFHLEdBQUcsQ0FBQyxZQUFZLENBQUMsYUFBYSxDQUFDLElBQUksSUFBSSxDQUFDO2dCQUV2RCxPQUFPO29CQUNMLEtBQUs7b0JBQ0wsTUFBTSxFQUFFLFFBQVEsQ0FBQyxNQUFNLEVBQUUsRUFBRSxDQUFDLElBQUksSUFBSTtpQkFDckMsQ0FBQztZQUNKLENBQUM7U0FDRjtLQUNGO0lBQ0QsS0FBSyxDQUFD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QUFDLFlBQVksQ0FBQyxLQUFLLENBQUM7b0JBQzVCLEtBQUssRUFBRSxHQUFHLENBQUMsWUFBWSxDQUFDLE9BQU8sQ0FBQztpQkFDakMsQ0FBQztZQUNKLENBQUM7U0FDRjtLQUNGO0lBQ0QsS0FBSyxDQUFDLElBQXFCO1FBQ3pCLE1BQU0sRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDO1FBQzlDLE9BQU8sQ0FBQyxLQUFLLEVBQUUsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsQ0FBQyxDQUFDO0lBQzdDLENBQUM7Q0FDRixDQUFDO0FBRUYsTUFBTSxRQUFRLEdBQUc7SUFDZixHQUFHLEVBQUUsQ0FBQyxRQUFRO0lBQ2QsT0FBTyxFQUFFLGtCQUFrQjtDQUM1QixDQUFDO0FBRUYsTUFBTSxXQUFXLEdBQUc7SUFDbEIsR0FBRyxFQUFFLENBQUMsV0FBVztJQUNqQixPQUFPLEVBQUUsWUFBWTtJQUNyQixLQUFLLEVBQUUsT0FBTztDQUNmLENBQUM7QUFFRixNQUFNLFVBQVUsR0FBRztJQUNqQixHQUFHLEVBQUUsQ0FBQyxVQUFVO0lBQ2hCLE9BQU8sRUFBRSxZQUFZO0lBQ3JCLEtBQUssRUFBRSxPQUFPO0NBQ2YsQ0FBQztBQUVGLE1BQU0sS0FBSyxHQUFHO0lBQ1osR0FBRztJQUNILElBQUk7SUFDSixTQUFTO0lBQ1QsVUFBVTtJQUNWLGVBQWUsRUFBRSxjQUFjO0lBQy9CLE9BQU87SUFDUCxVQUFVLEVBQUUsU0FBUztJQUNyQixVQUFVLEVBQUUsU0FBUztJQUNyQixLQUFLO0lBQ0wsU0FBUyxFQUFFLFFBQVE7SUFDbkIsWUFBWSxFQUFFLFdBQVc7SUFDekIsV0FBVyxFQUFFLFVBQVU7Q0FDeEIsQ0FBQztBQUVGLGVBQWUsS0FBSyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRE9NT3V0cHV0U3BlYywgTm9kZSBhcyBQcm9zZU1pcnJvck5vZGUsIE5vZGVTcGVjIH0gZnJvbSAncHJvc2VtaXJyb3ItbW9kZWwnO1xuaW1wb3J0ICogYXMgc2wgZnJvbSAncHJvc2VtaXJyb3Itc2NoZW1hLWxpc3QnO1xuXG5pbXBvcnQgeyB0b1N0eWxlU3RyaW5nIH0gZnJvbSAnbmd4LWVkaXRvci91dGlscyc7XG5cbmNvbnN0IGRvYzogTm9kZVNwZWMgPSB7XG4gIGNvbnRlbnQ6ICdibG9jaysnLFxufTtcblxuLy8gOjogTm9kZVNwZWMgVGhlIHRleHQgbm9kZS5cbmNvbnN0IHRleHQ6IE5vZGVTcGVjID0ge1xuICBncm91cDogJ2lubGluZScsXG59O1xuXG4vLyA6OiBOb2RlU3BlYyBBIHBsYWluIHBhcmFncmFwaCB0ZXh0YmxvY2suIFJlcHJlc2VudGVkIGluIHRoZSBET01cbi8vIGFzIGEgYDxwPmAgZWxlbWVudC5cbmNvbnN0IHBhcmFncmFwaDogTm9kZVNwZWMgPSB7XG4gIGNvbnRlbnQ6ICdpbmxpbmUqJyxcbiAgZ3JvdXA6ICdibG9jaycsXG4gIGF0dHJzOiB7XG4gICAgYWxpZ246IHtcbiAgICAgIGRlZmF1bHQ6IG51bGwsXG4gICAgfSxcbiAgICBpbmRlbnQ6IHtcbiAgICAgIGRlZmF1bHQ6IG51bGwsXG4gICAgfSxcbiAgfSxcbiAgcGFyc2VET006IFtcbiAgICB7XG4gICAgICB0YWc6ICdwJyxcbiAgICAgIGdldEF0dHJzKGRvbTogSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgY29uc3QgeyB0ZXh0QWxpZ24gfSA9IGRvbS5zdHlsZTtcbiAgICAgICAgY29uc3QgYWxpZ24gPSBkb20uZ2V0QXR0cmlidXRlKCdhbGlnbicpIHx8IHRleHRBbGlnbiB8fCBudWxsO1xuICAgICAgICBjb25zdCBpbmRlbnQgPSBkb20uZ2V0QXR0cmlidXRlKCdkYXRhLWluZGVudCcpIHx8IG51bGw7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBhbGlnbixcbiAgICAgICAgICBpbmRlbnQ6IHBhcnNlSW50KGluZGVudCwgMTApIHx8IG51bGwsXG4gICAgICAgIH07XG4gICAgICB9LFxuICAgIH0sXG4gIF0sXG4gIHRvRE9NKG5vZGUpOiBET01PdXRwdXRTcGVjIHtcbiAgICBjb25zdCB7IGFsaWduLCBpbmRlbnQgfSA9IG5vZGUuYXR0cnM7XG5cbiAgICBjb25zdCBzdHlsZXM6IFBhcnRpYWw8Q1NTU3R5bGVEZWNsYXJhdGlvbj4gPSB7XG4gICAgICB0ZXh0QWxpZ246IGFsaWduICE9PSAnbGVmdCcgPyBhbGlnbiA6IG51bGwsXG4gICAgICBtYXJnaW5MZWZ0OiBpbmRlbnQgIT09IG51bGwgPyBgJHtpbmRlbnQgKiA0MH1weGAgOiBudWxsLFxuICAgIH07XG4gICAgY29uc3Qgc3R5bGUgPSB0b1N0eWxlU3RyaW5nKHN0eWxlcykgfHwgbnVsbDtcblxuICAgIGNvbnN0IGF0dHJzID0ge1xuICAgICAgc3R5bGUsXG4gICAgICAnZGF0YS1pbmRlbnQnOiBpbmRlbnQgPz8gbnVsbCxcbiAgICB9O1xuXG4gICAgcmV0dXJuIFsncCcsIGF0dHJzLCAwXTtcbiAgfSxcbn07XG5cbi8vIDo6IE5vZGVTcGVjIEEgYmxvY2txdW90ZSAoYDxibG9ja3F1b3RlPmApIHdyYXBwaW5nIG9uZSBvciBtb3JlIGJsb2Nrcy5cbmNvbnN0IGJsb2NrcXVvdGU6IE5vZGVTcGVjID0ge1xuICBjb250ZW50OiAnYmxvY2srJyxcbiAgZ3JvdXA6ICdibG9jaycsXG4gIGRlZmluaW5nOiB0cnVlLFxuICBhdHRyczoge1xuICAgIGluZGVudDoge1xuICAgICAgZGVmYXVsdDogbnVsbCxcbiAgICB9LFxuICB9LFxuICBwYXJzZURPTTogW1xuICAgIHtcbiAgICAgIHRhZzogJ2Jsb2NrcXVvdGUnLFxuICAgICAgZ2V0QXR0cnMoZG9tOiBIVE1MRWxlbWVudCkge1xuICAgICAgICBjb25zdCBpbmRlbnQgPSBkb20uZ2V0QXR0cmlidXRlKCdkYXRhLWluZGVudCcpIHx8IG51bGw7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgaW5kZW50OiBwYXJzZUludChpbmRlbnQsIDEwKSB8fCBudWxsLFxuICAgICAgICB9O1xuICAgICAgfSxcbiAgICB9LFxuICBdLFxuICB0b0RPTShub2RlKTogRE9NT3V0cHV0U3BlYyB7XG4gICAgY29uc3QgeyBpbmRlbnQgfSA9IG5vZGUuYXR0cnM7XG5cbiAgICBjb25zdCBzdHlsZXM6IFBhcnRpYWw8Q1NTU3R5bGVEZWNsYXJhdGlvbj4gPSB7XG4gICAgICBtYXJnaW5MZWZ0OiBpbmRlbnQgIT09IG51bGwgPyBgJHtpbmRlbnQgKiA0MH1weGAgOiBudWxsLFxuICAgIH07XG5cbiAgICBjb25zdCBzdHlsZSA9IHRvU3R5bGVTdHJpbmcoc3R5bGVzKSB8fCBudWxsO1xuXG4gICAgY29uc3QgYXR0cnMgPSB7XG4gICAgICBzdHlsZSxcbiAgICAgICdkYXRhLWluZGVudCc6IGluZGVudCA/PyBudWxsLFxuICAgIH07XG5cbiAgICByZXR1cm4gWydibG9ja3F1b3RlJywgYXR0cnMsIDBdO1xuICB9LFxufTtcblxuLy8gOjogTm9kZVNwZWMgQSBob3Jpem9udGFsIHJ1bGUgKGA8aHI+YCkuXG5jb25zdCBob3Jpem9udGFsUnVsZTogTm9kZVNwZWMgPSB7XG4gIGdyb3VwOiAnYmxvY2snLFxuICBwYXJzZURPTTogW3sgdGFnOiAnaHInIH1dLFxuICB0b0RPTSgpOiBET01PdXRwdXRTcGVjIHtcbiAgICByZXR1cm4gWydociddO1xuICB9LFxufTtcblxuLy8gOjogTm9kZVNwZWMgQSBoZWFkaW5nIHRleHRibG9jaywgd2l0aCBhIGBsZXZlbGAgYXR0cmlidXRlIHRoYXRcbi8vIHNob3VsZCBob2xkIHRoZSBudW1iZXIgMSB0byA2LiBQYXJzZWQgYW5kIHNlcmlhbGl6ZWQgYXMgYDxoMT5gIHRvXG4vLyBgPGg2PmAgZWxlbWVudHMuXG5jb25zdCBoZWFkaW5nOiBOb2RlU3BlYyA9IHtcbiAgYXR0cnM6IHtcbiAgICBsZXZlbDoge1xuICAgICAgZGVmYXVsdDogMSxcbiAgICB9LFxuICAgIGFsaWduOiB7XG4gICAgICBkZWZhdWx0OiBudWxsLFxuICAgIH0sXG4gICAgaW5kZW50OiB7XG4gICAgICBkZWZhdWx0OiBudWxsLFxuICAgIH0sXG4gIH0sXG4gIGNvbnRlbnQ6ICdpbmxpbmUqJyxcbiAgZ3JvdXA6ICdibG9jaycsXG4gIGRlZmluaW5nOiB0cnVlLFxuICBwYXJzZURPTTogW1xuICAgIHtcbiAgICAgIHRhZzogJ2gxJyxcbiAgICAgIGdldEF0dHJzKGRvbTogSFRNTEVsZW1lbnQpOiBSZWNvcmQ8c3RyaW5nLCBhbnk+IHtcbiAgICAgICAgY29uc3QgeyB0ZXh0QWxpZ24gfSA9IGRvbS5zdHlsZTtcbiAgICAgICAgY29uc3QgYWxpZ24gPSBkb20uZ2V0QXR0cmlidXRlKCdhbGlnbicpIHx8IHRleHRBbGlnbiB8fCBudWxsO1xuICAgICAgICBjb25zdCBpbmRlbnQgPSBkb20uZ2V0QXR0cmlidXRlKCdkYXRhLWluZGVudCcpIHx8IG51bGw7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBsZXZlbDogMSxcbiAgICAgICAgICBhbGlnbixcbiAgICAgICAgICBpbmRlbnQ6IHBhcnNlSW50KGluZGVudCwgMTApIHx8IG51bGwsXG4gICAgICAgIH07XG4gICAgICB9LFxuICAgIH0sXG4gICAge1xuICAgICAgdGFnOiAnaDInLFxuICAgICAgZ2V0QXR0cnMoZG9tOiBIVE1MRWxlbWVudCk6IFJlY29yZDxzdHJpbmcsIGFueT4ge1xuICAgICAgICBjb25zdCB7IHRleHRBbGlnbiB9ID0gZG9tLnN0eWxlO1xuICAgICAgICBjb25zdCBhbGlnbiA9IGRvbS5nZXRBdHRyaWJ1dGUoJ2FsaWduJykgfHwgdGV4dEFsaWduIHx8IG51bGw7XG4gICAgICAgIGNvbnN0IGluZGVudCA9IGRvbS5nZXRBdHRyaWJ1dGUoJ2RhdGEtaW5kZW50JykgfHwgbnVsbDtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGxldmVsOiAyLFxuICAgICAgICAgIGFsaWduLFxuICAgICAgICAgIGluZGVudDogcGFyc2VJbnQoaW5kZW50LCAxMCkgfHwgbnVsbCxcbiAgICAgICAgfTtcbiAgICAgIH0sXG4gICAgfSxcbiAgICB7XG4gICAgICB0YWc6ICdoMycsXG4gICAgICBnZXRBdHRycyhkb206IEhUTUxFbGVtZW50KTogUmVjb3JkPHN0cmluZywgYW55PiB7XG4gICAgICAgIGNvbnN0IHsgdGV4dEFsaWduIH0gPSBkb20uc3R5bGU7XG4gICAgICAgIGNvbnN0IGFsaWduID0gZG9tLmdldEF0dHJpYnV0ZSgnYWxpZ24nKSB8fCB0ZXh0QWxpZ24gfHwgbnVsbDtcbiAgICAgICAgY29uc3QgaW5kZW50ID0gZG9tLmdldEF0dHJpYnV0ZSgnZGF0YS1pbmRlbnQnKSB8fCBudWxsO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgbGV2ZWw6IDMsXG4gICAgICAgICAgYWxpZ24sXG4gICAgICAgICAgaW5kZW50OiBwYXJzZUludChpbmRlbnQsIDEwKSB8fCBudWxsLFxuICAgICAgICB9O1xuICAgICAgfSxcbiAgICB9LFxuICAgIHtcbiAgICAgIHRhZzogJ2g0JyxcbiAgICAgIGdldEF0dHJzKGRvbTogSFRNTEVsZW1lbnQpOiBSZWNvcmQ8c3RyaW5nLCBhbnk+IHtcbiAgICAgICAgY29uc3QgeyB0ZXh0QWxpZ24gfSA9IGRvbS5zdHlsZTtcbiAgICAgICAgY29uc3QgYWxpZ24gPSBkb20uZ2V0QXR0cmlidXRlKCdhbGlnbicpIHx8IHRleHRBbGlnbiB8fCBudWxsO1xuICAgICAgICBjb25zdCBpbmRlbnQgPSBkb20uZ2V0QXR0cmlidXRlKCdkYXRhLWluZGVudCcpIHx8IG51bGw7XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBsZXZlbDogNCxcbiAgICAgICAgICBhbGlnbixcbiAgICAgICAgICBpbmRlbnQ6IHBhcnNlSW50KGluZGVudCwgMTApIHx8IG51bGwsXG4gICAgICAgIH07XG4gICAgICB9LFxuICAgIH0sXG4gICAge1xuICAgICAgdGFnOiAnaDUnLFxuICAgICAgZ2V0QXR0cnMoZG9tOiBIVE1MRWxlbWVudCk6IFJlY29yZDxzdHJpbmcsIGFueT4ge1xuICAgICAgICBjb25zdCB7IHRleHRBbGlnbiB9ID0gZG9tLnN0eWxlO1xuICAgICAgICBjb25zdCBhbGlnbiA9IGRvbS5nZXRBdHRyaWJ1dGUoJ2FsaWduJykgfHwgdGV4dEFsaWduIHx8IG51bGw7XG4gICAgICAgIGNvbnN0IGluZGVudCA9IGRvbS5nZXRBdHRyaWJ1dGUoJ2RhdGEtaW5kZW50JykgfHwgbnVsbDtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGxldmVsOiA1LFxuICAgICAgICAgIGFsaWduLFxuICAgICAgICAgIGluZGVudDogcGFyc2VJbnQoaW5kZW50LCAxMCkgfHwgbnVsbCxcbiAgICAgICAgfTtcbiAgICAgIH0sXG4gICAgfSxcbiAgICB7XG4gICAgICB0YWc6ICdoNicsXG4gICAgICBnZXRBdHRycyhkb206IEhUTUxFbGVtZW50KTogUmVjb3JkPHN0cmluZywgYW55PiB7XG4gICAgICAgIGNvbnN0IHsgdGV4dEFsaWduIH0gPSBkb20uc3R5bGU7XG4gICAgICAgIGNvbnN0IGFsaWduID0gZG9tLmdldEF0dHJpYnV0ZSgnYWxpZ24nKSB8fCB0ZXh0QWxpZ24gfHwgbnVsbDtcbiAgICAgICAgY29uc3QgaW5kZW50ID0gZG9tLmdldEF0dHJpYnV0ZSgnZGF0YS1pbmRlbnQnKSB8fCBudWxsO1xuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgbGV2ZWw6IDYsXG4gICAgICAgICAgYWxpZ24sXG4gICAgICAgICAgaW5kZW50OiBwYXJzZUludChpbmRlbnQsIDEwKSB8fCBudWxsLFxuICAgICAgICB9O1xuICAgICAgfSxcbiAgICB9LFxuICBdLFxuICB0b0RPTShub2RlKTogRE9NT3V0cHV0U3BlYyB7XG4gICAgY29uc3QgeyBsZXZlbCwgYWxpZ24sIGluZGVudCB9ID0gbm9kZS5hdHRycztcblxuICAgIGNvbnN0IHN0eWxlczogUGFydGlhbDxDU1NTdHlsZURlY2xhcmF0aW9uPiA9IHtcbiAgICAgIHRleHRBbGlnbjogYWxpZ24gIT09ICdsZWZ0JyA/IGFsaWduIDogbnVsbCxcbiAgICAgIG1hcmdpbkxlZnQ6IGluZGVudCAhPT0gbnVsbCA/IGAke2luZGVudCAqIDQwfXB4YCA6IG51bGwsXG4gICAgfTtcbiAgICBjb25zdCBzdHlsZSA9IHRvU3R5bGVTdHJpbmcoc3R5bGVzKSB8fCBudWxsO1xuXG4gICAgY29uc3QgYXR0cnMgPSB7XG4gICAgICBzdHlsZSxcbiAgICAgICdkYXRhLWluZGVudCc6IGluZGVudCA/PyBudWxsLFxuICAgIH07XG5cbiAgICByZXR1cm4gW2BoJHtsZXZlbH1gLCBhdHRycywgMF07XG4gIH0sXG59O1xuXG4vLyA6OiBOb2RlU3BlYyBBIGNvZGUgbGlzdGluZy4gRGlzYWxsb3dzIG1hcmtzIG9yIG5vbi10ZXh0IGlubGluZVxuLy8gbm9kZXMgYnkgZGVmYXVsdC4gUmVwcmVzZW50ZWQgYXMgYSBgPHByZT5gIGVsZW1lbnQgd2l0aCBhXG4vLyBgPGNvZGU+YCBlbGVtZW50IGluc2lkZSBvZiBpdC5cbmNvbnN0IGNvZGVCbG9jazogTm9kZVNwZWMgPSB7XG4gIGNvbnRlbnQ6ICd0ZXh0KicsXG4gIG1hcmtzOiAnJyxcbiAgZ3JvdXA6ICdibG9jaycsXG4gIGNvZGU6IHRydWUsXG4gIGRlZmluaW5nOiB0cnVlLFxuICBwYXJzZURPTTogW1xuICAgIHtcbiAgICAgIHRhZzogJ3ByZScsXG4gICAgICBwcmVzZXJ2ZVdoaXRlc3BhY2U6ICdmdWxsJyxcbiAgICB9LFxuICBdLFxuICB0b0RPTSgpOiBET01PdXRwdXRTcGVjIHtcbiAgICByZXR1cm4gWydwcmUnLCBbJ2NvZGUnLCAwXV07XG4gIH0sXG59O1xuXG4vLyA6OiBOb2RlU3BlYyBBIGhhcmQgbGluZSBicmVhaywgcmVwcmVzZW50ZWQgaW4gdGhlIERPTSBhcyBgPGJyPmAuXG5jb25zdCBoYXJkQnJlYWs6IE5vZGVTcGVjID0ge1xuICBpbmxpbmU6IHRydWUsXG4gIGdyb3VwOiAnaW5saW5lJyxcbiAgc2VsZWN0YWJsZTogZmFsc2UsXG4gIHBhcnNlRE9NOiBbeyB0YWc6ICdicicgfV0sXG4gIHRvRE9NKCk6IERPTU91dHB1dFNwZWMge1xuICAgIHJldHVybiBbJ2JyJ107XG4gIH0sXG59O1xuXG4vLyA6OiBOb2RlU3BlYyBBbiBpbmxpbmUgaW1hZ2UgKGA8aW1nPmApIG5vZGUuIFN1cHBvcnRzIGBzcmNgLFxuLy8gYGFsdGAsIGFuZCBgaHJlZmAgYXR0cmlidXRlcy4gVGhlIGxhdHRlciB0d28gZGVmYXVsdCB0byB0aGUgZW1wdHlcbi8vIHN0cmluZy5cbmV4cG9ydCBjb25zdCBpbWFnZTogTm9kZVNwZWMgPSB7XG4gIGlubGluZTogdHJ1ZSxcbiAgYXR0cnM6IHtcbiAgICBzcmM6IHt9LFxuICAgIGFsdDogeyBkZWZhdWx0OiBudWxsIH0sXG4gICAgdGl0bGU6IHsgZGVmYXVsdDogbnVsbCB9LFxuICAgIHdpZHRoOiB7IGRlZmF1bHQ6IG51bGwgfSxcbiAgfSxcbiAgZ3JvdXA6ICdpbmxpbmUnLFxuICBkcmFnZ2FibGU6IHRydWUsXG4gIHBhcnNlRE9NOiBbXG4gICAge1xuICAgICAgdGFnOiAnaW1nW3NyY10nLFxuICAgICAgZ2V0QXR0cnMoZG9tOiBIVE1MRWxlbWVudCk6IFJlY29yZDxzdHJpbmcsIGFueT4ge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHNyYzogZG9tLmdldEF0dHJpYnV0ZSgnc3JjJyksXG4gICAgICAgICAgdGl0bGU6IGRvbS5nZXRBdHRyaWJ1dGUoJ3RpdGxlJyksXG4gICAgICAgICAgYWx0OiBkb20uZ2V0QXR0cmlidXRlKCdhbHQnKSxcbiAgICAgICAgICB3aWR0aDogZG9tLmdldEF0dHJpYnV0ZSgnd2lkdGgnKSxcbiAgICAgICAgfTtcbiAgICAgIH0sXG4gICAgfSxcbiAgXSxcbiAgdG9ET00obm9kZTogUHJvc2VNaXJyb3JOb2RlKTogRE9NT3V0cHV0U3BlYyB7XG4gICAgY29uc3QgeyBzcmMsIGFsdCwgdGl0bGUsIHdpZHRoIH0gPSBub2RlLmF0dHJzO1xuICAgIHJldHVybiBbJ2ltZycsIHsgc3JjLCBhbHQsIHRpdGxlLCB3aWR0aCB9XTtcbiAgfSxcbn07XG5cbmNvbnN0IGxpc3RJdGVtID0ge1xuICAuLi5zbC5saXN0SXRlbSxcbiAgY29udGVudDogJ3BhcmFncmFwaCBibG9jayonLFxufTtcblxuY29uc3Qgb3JkZXJlZExpc3QgPSB7XG4gIC4uLnNsLm9yZGVyZWRMaXN0LFxuICBjb250ZW50OiAnbGlzdF9pdGVtKycsXG4gIGdyb3VwOiAnYmxvY2snLFxufTtcblxuY29uc3QgYnVsbGV0TGlzdCA9IHtcbiAgLi4uc2wuYnVsbGV0TGlzdCxcbiAgY29udGVudDogJ2xpc3RfaXRlbSsnLFxuICBncm91cDogJ2Jsb2NrJyxcbn07XG5cbmNvbnN0IG5vZGVzID0ge1xuICBkb2MsXG4gIHRleHQsXG4gIHBhcmFncmFwaCxcbiAgYmxvY2txdW90ZSxcbiAgaG9yaXpvbnRhbF9ydWxlOiBob3Jpem9udGFsUnVsZSxcbiAgaGVhZGluZyxcbiAgaGFyZF9icmVhazogaGFyZEJyZWFrLFxuICBjb2RlX2Jsb2NrOiBjb2RlQmxvY2ssXG4gIGltYWdlLFxuICBsaXN0X2l0ZW06IGxpc3RJdGVtLFxuICBvcmRlcmVkX2xpc3Q6IG9yZGVyZWRMaXN0LFxuICBidWxsZXRfbGlzdDogYnVsbGV0TGlzdCxcbn07XG5cbmV4cG9ydCBkZWZhdWx0IG5vZGVzO1xuIl19