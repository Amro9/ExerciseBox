import { Component, Input, } from '@angular/core';
import { NgxEditorError } from 'ngx-editor/utils';
import { MenuService } from './menu.service';
import * as i0 from "@angular/core";
import * as i1 from "./menu.service";
import * as i2 from "@angular/common";
import * as i3 from "./toggle-command/toggle-command.component";
import * as i4 from "./insert-command/insert-command.component";
import * as i5 from "./link/link.component";
import * as i6 from "./dropdown/dropdown.component";
import * as i7 from "./image/image.component";
import * as i8 from "./color-picker/color-picker.component";
export const DEFAULT_TOOLBAR = [
    ['bold', 'italic'],
    ['code', 'blockquote'],
    ['underline', 'strike'],
    ['ordered_list', 'bullet_list'],
    [{ heading: ['h1', 'h2', 'h3', 'h4', 'h5', 'h6'] }],
    ['link', 'image'],
    ['text_color', 'background_color'],
    ['align_left', 'align_center', 'align_right', 'align_justify'],
    ['format_clear'],
];
export const TOOLBAR_MINIMAL = [
    ['bold', 'italic'],
    [{ heading: ['h1', 'h2', 'h3', 'h4', 'h5', 'h6'] }],
    ['link', 'image'],
    ['text_color', 'background_color'],
];
export const TOOLBAR_FULL = [
    ['bold', 'italic'],
    ['code', 'blockquote'],
    ['underline', 'strike'],
    ['ordered_list', 'bullet_list'],
    [{ heading: ['h1', 'h2', 'h3', 'h4', 'h5', 'h6'] }],
    ['link', 'image'],
    ['text_color', 'background_color'],
    ['align_left', 'align_center', 'align_right', 'align_justify'],
    ['horizontal_rule', 'format_clear', 'indent', 'outdent'],
    ['superscript', 'subscript'],
    ['undo', 'redo'],
];
const DEFAULT_COLOR_PRESETS = [
    '#b60205',
    '#d93f0b',
    '#fbca04',
    '#0e8a16',
    '#006b75',
    '#1d76db',
    '#0052cc',
    '#5319e7',
    '#e99695',
    '#f9d0c4',
    '#fef2c0',
    '#c2e0c6',
    '#bfdadc',
    '#c5def5',
    '#bfd4f2',
    '#d4c5f9',
];
export class MenuComponent {
    constructor(menuService) {
        this.menuService = menuService;
        this.toolbar = TOOLBAR_MINIMAL;
        this.colorPresets = DEFAULT_COLOR_PRESETS;
        this.disabled = false;
        this.customMenuRef = null;
        this.dropdownPlacement = 'bottom';
        this.toggleCommands = [
            'bold',
            'italic',
            'underline',
            'strike',
            'code',
            'blockquote',
            'ordered_list',
            'bullet_list',
            'align_left',
            'align_center',
            'align_right',
            'align_justify',
            'superscript',
            'subscript',
        ];
        this.insertCommands = [
            'horizontal_rule',
            'format_clear',
            'indent',
            'outdent',
            'undo',
            'redo',
        ];
        this.iconContainerClass = ['NgxEditor__MenuItem', 'NgxEditor__MenuItem--IconContainer'];
        this.dropdownContainerClass = ['NgxEditor__Dropdown'];
        this.seperatorClass = ['NgxEditor__Seperator'];
    }
    get presets() {
        const col = 8;
        const colors = [];
        this.colorPresets.forEach((color, index) => {
            const row = Math.floor(index / col);
            if (!colors[row]) {
                colors.push([]);
            }
            colors[row].push(color);
        });
        return colors;
    }
    trackByIndex(index) {
        return index;
    }
    isDropDown(item) {
        if (item?.heading) {
            return true;
        }
        return false;
    }
    getDropdownItems(item) {
        return item;
    }
    isLinkItem(item) {
        if (item === 'link') {
            return true;
        }
        // NOTE: it is not sufficient to check for a `link` property
        // as String.prototype.link is a valid (although deprecated) method
        return typeof item === 'object'
            && typeof item?.link === 'object';
    }
    isLinkWithOptions(item) {
        // NOTE: it is not sufficient to check for a `link` property
        // as String.prototype.link is a valid (although deprecated) method
        return typeof item === 'object'
            && typeof item?.link === 'object';
    }
    getLinkOptions(item) {
        return item?.link;
    }
    ngOnInit() {
        if (!this.editor) {
            throw new NgxEditorError('Required editor instance to initialize menu component');
        }
        this.menuService.editor = this.editor;
    }
    static { this.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "17.3.8", ngImport: i0, type: MenuComponent, deps: [{ token: i1.MenuService }], target: i0.ɵɵFactoryTarget.Component }); }
    static { this.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "17.3.8", type: MenuComponent, selector: "ngx-editor-menu", inputs: { toolbar: "toolbar", colorPresets: "colorPresets", disabled: "disabled", editor: "editor", customMenuRef: "customMenuRef", dropdownPlacement: "dropdownPlacement" }, providers: [MenuService], ngImport: i0, template: "<div\n  class=\"NgxEditor__MenuBar\"\n  [ngClass]=\"{ 'NgxEditor--Disabled': disabled, 'NgxEditor__MenuBar--Reverse': dropdownPlacement === 'top' }\"\n>\n  <ng-container *ngFor=\"let toolbarItem of toolbar; let lastToolbarItem = last; trackBy: trackByIndex\">\n    <ng-container *ngFor=\"let item of toolbarItem; let lastItem = last; trackBy: trackByIndex\">\n      <!-- toggle icons -->\n      <ngx-toggle-command [toolbarItem]=\"item\" [class]=\"iconContainerClass\" *ngIf=\"toggleCommands.includes(item)\">\n      </ngx-toggle-command>\n\n      <ngx-insert-command [toolbarItem]=\"item\" [class]=\"iconContainerClass\" *ngIf=\"insertCommands.includes(item)\">\n      </ngx-insert-command>\n\n      <!-- link -->\n      <ng-container *ngIf=\"isLinkItem(item)\">\n        <ngx-link [class]=\"iconContainerClass\" [options]=\"getLinkOptions(item)\"></ngx-link>\n      </ng-container>\n\n      <!-- image -->\n      <ngx-image [class]=\"iconContainerClass\" *ngIf=\"item === 'image'\"> </ngx-image>\n\n      <!-- dropdown -->\n      <ng-container *ngIf=\"isDropDown(item)\">\n        <ngx-dropdown\n          *ngFor=\"let dropdownItem of getDropdownItems(item) | keyvalue; trackBy: trackByIndex\"\n          [class]=\"dropdownContainerClass\"\n          [group]=\"dropdownItem.key\"\n          [items]=\"dropdownItem.value\"\n        >\n        </ngx-dropdown>\n      </ng-container>\n\n      <!-- text color picker -->\n      <ngx-color-picker\n        [class]=\"iconContainerClass\"\n        *ngIf=\"item === 'text_color'\"\n        type=\"text_color\"\n        [presets]=\"presets\"\n      >\n      </ngx-color-picker>\n      <!-- background color picker -->\n      <ngx-color-picker\n        [class]=\"iconContainerClass\"\n        *ngIf=\"item === 'background_color'\"\n        type=\"background_color\"\n        [presets]=\"presets\"\n      >\n      </ngx-color-picker>\n\n      <!-- seperator -->\n      <div [class]=\"seperatorClass\" *ngIf=\"lastItem && !lastToolbarItem\"></div>\n    </ng-container>\n  </ng-container>\n\n  <!-- custom menu -->\n  <ng-container *ngIf=\"customMenuRef\">\n    <ng-container [ngTemplateOutlet]=\"customMenuRef\"></ng-container>\n  </ng-container>\n</div>\n", styles: [""], dependencies: [{ kind: "directive", type: i2.NgClass, selector: "[ngClass]", inputs: ["class", "ngClass"] }, { kind: "directive", type: i2.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }, { kind: "directive", type: i2.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "directive", type: i2.NgTemplateOutlet, selector: "[ngTemplateOutlet]", inputs: ["ngTemplateOutletContext", "ngTemplateOutlet", "ngTemplateOutletInjector"] }, { kind: "component", type: i3.ToggleCommandComponent, selector: "ngx-toggle-command", inputs: ["toolbarItem"] }, { kind: "component", type: i4.InsertCommandComponent, selector: "ngx-insert-command", inputs: ["toolbarItem"] }, { kind: "component", type: i5.LinkComponent, selector: "ngx-link", inputs: ["options"] }, { kind: "component", type: i6.DropdownComponent, selector: "ngx-dropdown", inputs: ["group", "items"] }, { kind: "component", type: i7.ImageComponent, selector: "ngx-image" }, { kind: "component", type: i8.ColorPickerComponent, selector: "ngx-color-picker", inputs: ["presets", "type"] }, { kind: "pipe", type: i2.KeyValuePipe, name: "keyvalue" }] }); }
}
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "17.3.8", ngImport: i0, type: MenuComponent, decorators: [{
            type: Component,
            args: [{ selector: 'ngx-editor-menu', providers: [MenuService], template: "<div\n  class=\"NgxEditor__MenuBar\"\n  [ngClass]=\"{ 'NgxEditor--Disabled': disabled, 'NgxEditor__MenuBar--Reverse': dropdownPlacement === 'top' }\"\n>\n  <ng-container *ngFor=\"let toolbarItem of toolbar; let lastToolbarItem = last; trackBy: trackByIndex\">\n    <ng-container *ngFor=\"let item of toolbarItem; let lastItem = last; trackBy: trackByIndex\">\n      <!-- toggle icons -->\n      <ngx-toggle-command [toolbarItem]=\"item\" [class]=\"iconContainerClass\" *ngIf=\"toggleCommands.includes(item)\">\n      </ngx-toggle-command>\n\n      <ngx-insert-command [toolbarItem]=\"item\" [class]=\"iconContainerClass\" *ngIf=\"insertCommands.includes(item)\">\n      </ngx-insert-command>\n\n      <!-- link -->\n      <ng-container *ngIf=\"isLinkItem(item)\">\n        <ngx-link [class]=\"iconContainerClass\" [options]=\"getLinkOptions(item)\"></ngx-link>\n      </ng-container>\n\n      <!-- image -->\n      <ngx-image [class]=\"iconContainerClass\" *ngIf=\"item === 'image'\"> </ngx-image>\n\n      <!-- dropdown -->\n      <ng-container *ngIf=\"isDropDown(item)\">\n        <ngx-dropdown\n          *ngFor=\"let dropdownItem of getDropdownItems(item) | keyvalue; trackBy: trackByIndex\"\n          [class]=\"dropdownContainerClass\"\n          [group]=\"dropdownItem.key\"\n          [items]=\"dropdownItem.value\"\n        >\n        </ngx-dropdown>\n      </ng-container>\n\n      <!-- text color picker -->\n      <ngx-color-picker\n        [class]=\"iconContainerClass\"\n        *ngIf=\"item === 'text_color'\"\n        type=\"text_color\"\n        [presets]=\"presets\"\n      >\n      </ngx-color-picker>\n      <!-- background color picker -->\n      <ngx-color-picker\n        [class]=\"iconContainerClass\"\n        *ngIf=\"item === 'background_color'\"\n        type=\"background_color\"\n        [presets]=\"presets\"\n      >\n      </ngx-color-picker>\n\n      <!-- seperator -->\n      <div [class]=\"seperatorClass\" *ngIf=\"lastItem && !lastToolbarItem\"></div>\n    </ng-container>\n  </ng-container>\n\n  <!-- custom menu -->\n  <ng-container *ngIf=\"customMenuRef\">\n    <ng-container [ngTemplateOutlet]=\"customMenuRef\"></ng-container>\n  </ng-container>\n</div>\n" }]
        }], ctorParameters: () => [{ type: i1.MenuService }], propDecorators: { toolbar: [{
                type: Input
            }], colorPresets: [{
                type: Input
            }], disabled: [{
                type: Input
            }], editor: [{
                type: Input
            }], customMenuRef: [{
                type: Input
            }], dropdownPlacement: [{
                type: Input
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWVudS5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy9uZ3gtZWRpdG9yL3NyYy9saWIvbW9kdWxlcy9tZW51L21lbnUuY29tcG9uZW50LnRzIiwiLi4vLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvbmd4LWVkaXRvci9zcmMvbGliL21vZHVsZXMvbWVudS9tZW51LmNvbXBvbmVudC5odG1sIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFDTCxTQUFTLEVBQUUsS0FBSyxHQUVqQixNQUFNLGVBQWUsQ0FBQztBQUV2QixPQUFPLEVBQUUsY0FBYyxFQUFFLE1BQU0sa0JBQWtCLENBQUM7QUFFbEQsT0FBTyxFQUFFLFdBQVcsRUFBRSxNQUFNLGdCQUFnQixDQUFDOzs7Ozs7Ozs7O0FBRzdDLE1BQU0sQ0FBQyxNQUFNLGVBQWUsR0FBWTtJQUN0QyxDQUFDLE1BQU0sRUFBRSxRQUFRLENBQUM7SUFDbEIsQ0FBQyxNQUFNLEVBQUUsWUFBWSxDQUFDO0lBQ3RCLENBQUMsV0FBVyxFQUFFLFFBQVEsQ0FBQztJQUN2QixDQUFDLGNBQWMsRUFBRSxhQUFhLENBQUM7SUFDL0IsQ0FBQyxFQUFFLE9BQU8sRUFBRSxDQUFDLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxDQUFDLEVBQUUsQ0FBQztJQUNuRCxDQUFDLE1BQU0sRUFBRSxPQUFPLENBQUM7SUFDakIsQ0FBQyxZQUFZLEVBQUUsa0JBQWtCLENBQUM7SUFDbEMsQ0FBQyxZQUFZLEVBQUUsY0FBYyxFQUFFLGFBQWEsRUFBRSxlQUFlLENBQUM7SUFDOUQsQ0FBQyxjQUFjLENBQUM7Q0FDakIsQ0FBQztBQUVGLE1BQU0sQ0FBQyxNQUFNLGVBQWUsR0FBWTtJQUN0QyxDQUFDLE1BQU0sRUFBRSxRQUFRLENBQUM7SUFDbEIsQ0FBQyxFQUFFLE9BQU8sRUFBRSxDQUFDLElBQUksRUFB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YSxhQUFhO2tCQVB6QixTQUFTOytCQUNFLGlCQUFpQixhQUdoQixDQUFDLFdBQVcsQ0FBQztnRkFJZixPQUFPO3NCQUFmLEtBQUs7Z0JBQ0csWUFBWTtzQkFBcEIsS0FBSztnQkFDRyxRQUFRO3NCQUFoQixLQUFLO2dCQUNHLE1BQU07c0JBQWQsS0FBSztnQkFDRyxhQUFhO3NCQUFyQixLQUFLO2dCQUNHLGlCQUFpQjtzQkFBekIsS0FBSyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIENvbXBvbmVudCwgSW5wdXQsXG4gIE9uSW5pdCwgVGVtcGxhdGVSZWYsXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuXG5pbXBvcnQgeyBOZ3hFZGl0b3JFcnJvciB9IGZyb20gJ25neC1lZGl0b3IvdXRpbHMnO1xuaW1wb3J0IHsgVG9vbGJhciwgVG9vbGJhckl0ZW0sIFRvb2xiYXJEcm9wZG93biwgVG9vbGJhckxpbmssIFRvb2xiYXJMaW5rT3B0aW9ucyB9IGZyb20gJy4uLy4uL3R5cGVzJztcbmltcG9ydCB7IE1lbnVTZXJ2aWNlIH0gZnJvbSAnLi9tZW51LnNlcnZpY2UnO1xuaW1wb3J0IEVkaXRvciBmcm9tICcuLi8uLi9FZGl0b3InO1xuXG5leHBvcnQgY29uc3QgREVGQVVMVF9UT09MQkFSOiBUb29sYmFyID0gW1xuICBbJ2JvbGQnLCAnaXRhbGljJ10sXG4gIFsnY29kZScsICdibG9ja3F1b3RlJ10sXG4gIFsndW5kZXJsaW5lJywgJ3N0cmlrZSddLFxuICBbJ29yZGVyZWRfbGlzdCcsICdidWxsZXRfbGlzdCddLFxuICBbeyBoZWFkaW5nOiBbJ2gxJywgJ2gyJywgJ2gzJywgJ2g0JywgJ2g1JywgJ2g2J10gfV0sXG4gIFsnbGluaycsICdpbWFnZSddLFxuICBbJ3RleHRfY29sb3InLCAnYmFja2dyb3VuZF9jb2xvciddLFxuICBbJ2FsaWduX2xlZnQnLCAnYWxpZ25fY2VudGVyJywgJ2FsaWduX3JpZ2h0JywgJ2FsaWduX2p1c3RpZnknXSxcbiAgWydmb3JtYXRfY2xlYXInXSxcbl07XG5cbmV4cG9ydCBjb25zdCBUT09MQkFSX01JTklNQUw6IFRvb2xiYXIgPSBbXG4gIFsnYm9sZCcsICdpdGFsaWMnXSxcbiAgW3sgaGVhZGluZzogWydoMScsICdoMicsICdoMycsICdoNCcsICdoNScsICdoNiddIH1dLFxuICBbJ2xpbmsnLCAnaW1hZ2UnXSxcbiAgWyd0ZXh0X2NvbG9yJywgJ2JhY2tncm91bmRfY29sb3InXSxcbl07XG5cbmV4cG9ydCBjb25zdCBUT09MQkFSX0ZVTEw6IFRvb2xiYXIgPSBbXG4gIFsnYm9sZCcsICdpdGFsaWMnXSxcbiAgWydjb2RlJywgJ2Jsb2NrcXVvdGUnXSxcbiAgWyd1bmRlcmxpbmUnLCAnc3RyaWtlJ10sXG4gIFsnb3JkZXJlZF9saXN0JywgJ2J1bGxldF9saXN0J10sXG4gIFt7IGhlYWRpbmc6IFsnaDEnLCAnaDInLCAnaDMnLCAnaDQnLCAnaDUnLCAnaDYnXSB9XSxcbiAgWydsaW5rJywgJ2ltYWdlJ10sXG4gIFsndGV4dF9jb2xvcicsICdiYWNrZ3JvdW5kX2NvbG9yJ10sXG4gIFsnYWxpZ25fbGVmdCcsICdhbGlnbl9jZW50ZXInLCAnYWxpZ25fcmlnaHQnLCAnYWxpZ25fanVzdGlmeSddLFxuICBbJ2hvcml6b250YWxfcnVsZScsICdmb3JtYXRfY2xlYXInLCAnaW5kZW50JywgJ291dGRlbnQnXSxcbiAgWydzdXBlcnNjcmlwdCcsICdzdWJzY3JpcHQnXSxcbiAgWyd1bmRvJywgJ3JlZG8nXSxcbl07XG5cbmNvbnN0IERFRkFVTFRfQ09MT1JfUFJFU0VUUyA9IFtcbiAgJyNiNjAyMDUnLFxuICAnI2Q5M2YwYicsXG4gICcjZmJjYTA0JyxcbiAgJyMwZThhMTYnLFxuICAnIzAwNmI3NScsXG4gICcjMWQ3NmRiJyxcbiAgJyMwMDUyY2MnLFxuICAnIzUzMTllNycsXG4gICcjZTk5Njk1JyxcbiAgJyNmOWQwYzQnLFxuICAnI2ZlZjJjMCcsXG4gICcjYzJlMGM2JyxcbiAgJyNiZmRhZGMnLFxuICAnI2M1ZGVmNScsXG4gICcjYmZkNGYyJyxcbiAgJyNkNGM1ZjknLFxuXTtcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnbmd4LWVkaXRvci1tZW51JyxcbiAgdGVtcGxhdGVVcmw6ICcuL21lbnUuY29tcG9uZW50Lmh0bWwnLFxuICBzdHlsZVVybHM6IFsnLi9tZW51LmNvbXBvbmVudC5zY3NzJ10sXG4gIHByb3ZpZGVyczogW01lbnVTZXJ2aWNlXSxcbn0pXG5cbmV4cG9ydCBjbGFzcyBNZW51Q29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0IHtcbiAgQElucHV0KCkgdG9vbGJhcjogVG9vbGJhciA9IFRPT0xCQVJfTUlOSU1BTDtcbiAgQElucHV0KCkgY29sb3JQcmVzZXRzOiBzdHJpbmdbXSA9IERFRkFVTFRfQ09MT1JfUFJFU0VUUztcbiAgQElucHV0KCkgZGlzYWJsZWQgPSBmYWxzZTtcbiAgQElucHV0KCkgZWRpdG9yOiBFZGl0b3I7XG4gIEBJbnB1dCgpIGN1c3RvbU1lbnVSZWY6IFRlbXBsYXRlUmVmPGFueT4gfCBudWxsID0gbnVsbDtcbiAgQElucHV0KCkgZHJvcGRvd25QbGFjZW1lbnQ6ICd0b3AnIHwgJ2JvdHRvbScgPSAnYm90dG9tJztcblxuICB0b2dnbGVDb21tYW5kczogVG9vbGJhckl0ZW1bXSA9IFtcbiAgICAnYm9sZCcsXG4gICAgJ2l0YWxpYycsXG4gICAgJ3VuZGVybGluZScsXG4gICAgJ3N0cmlrZScsXG4gICAgJ2NvZGUnLFxuICAgICdibG9ja3F1b3RlJyxcbiAgICAnb3JkZXJlZF9saXN0JyxcbiAgICAnYnVsbGV0X2xpc3QnLFxuICAgICdhbGlnbl9sZWZ0JyxcbiAgICAnYWxpZ25fY2VudGVyJyxcbiAgICAnYWxpZ25fcmlnaHQnLFxuICAgICdhbGlnbl9qdXN0aWZ5JyxcbiAgICAnc3VwZXJzY3JpcHQnLFxuICAgICdzdWJzY3JpcHQnLFxuICBdO1xuXG4gIGluc2VydENvbW1hbmRzOiBUb29sYmFySXRlbVtdID0gW1xuICAgICdob3Jpem9udGFsX3J1bGUnLFxuICAgICdmb3JtYXRfY2xlYXInLFxuICAgICdpbmRlbnQnLFxuICAgICdvdXRkZW50JyxcbiAgICAndW5kbycsXG4gICAgJ3JlZG8nLFxuICBdO1xuXG4gIGljb25Db250YWluZXJDbGFzcyA9IFsnTmd4RWRpdG9yX19NZW51SXRlbScsICdOZ3hFZGl0b3JfX01lbnVJdGVtLS1JY29uQ29udGFpbmVyJ107XG4gIGRyb3Bkb3duQ29udGFpbmVyQ2xhc3MgPSBbJ05neEVkaXRvcl9fRHJvcGRvd24nXTtcbiAgc2VwZXJhdG9yQ2xhc3MgPSBbJ05neEVkaXRvcl9fU2VwZXJhdG9yJ107XG5cbiAgY29uc3RydWN0b3IocHJpdmF0ZSBtZW51U2VydmljZTogTWVudVNlcnZpY2UpIHsgfVxuXG4gIGdldCBwcmVzZXRzKCk6IHN0cmluZ1tdW10ge1xuICAgIGNvbnN0IGNvbCA9IDg7XG4gICAgY29uc3QgY29sb3JzOiBzdHJpbmdbXVtdID0gW107XG5cbiAgICB0aGlzLmNvbG9yUHJlc2V0cy5mb3JFYWNoKChjb2xvciwgaW5kZXgpID0+IHtcbiAgICAgIGNvbnN0IHJvdyA9IE1hdGguZmxvb3IoaW5kZXggLyBjb2wpO1xuXG4gICAgICBpZiAoIWNvbG9yc1tyb3ddKSB7XG4gICAgICAgIGNvbG9ycy5wdXNoKFtdKTtcbiAgICAgIH1cblxuICAgICAgY29sb3JzW3Jvd10ucHVzaChjb2xvcik7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gY29sb3JzO1xuICB9XG5cbiAgdHJhY2tCeUluZGV4KGluZGV4OiBudW1iZXIpOiBudW1iZXIge1xuICAgIHJldHVybiBpbmRleDtcbiAgfVxuXG4gIGlzRHJvcERvd24oaXRlbTogVG9vbGJhckl0ZW0pOiBib29sZWFuIHtcbiAgICBpZiAoKGl0ZW0gYXMgVG9vbGJhckRyb3Bkb3duKT8uaGVhZGluZykge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgZ2V0RHJvcGRvd25JdGVtcyhpdGVtOiBUb29sYmFySXRlbSk6IFRvb2xiYXJEcm9wZG93biB7XG4gICAgcmV0dXJuIGl0ZW0gYXMgVG9vbGJhckRyb3Bkb3duO1xuICB9XG5cbiAgaXNMaW5rSXRlbShpdGVtOiBUb29sYmFySXRlbSk6IGJvb2xlYW4ge1xuICAgIGlmIChpdGVtID09PSAnbGluaycpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIC8vIE5PVEU6IGl0IGlzIG5vdCBzdWZmaWNpZW50IHRvIGNoZWNrIGZvciBhIGBsaW5rYCBwcm9wZXJ0eVxuICAgIC8vIGFzIFN0cmluZy5wcm90b3R5cGUubGluayBpcyBhIHZhbGlkIChhbHRob3VnaCBkZXByZWNhdGVkKSBtZXRob2RcbiAgICByZXR1cm4gdHlwZW9mIGl0ZW0gPT09ICdvYmplY3QnXG4gICAgICAmJiB0eXBlb2YgKGl0ZW0gYXMgVG9vbGJhckxpbmspPy5saW5rID09PSAnb2JqZWN0JztcbiAgfVxuXG4gIGlzTGlua1dpdGhPcHRpb25zKGl0ZW06IFRvb2xiYXJJdGVtKTogYm9vbGVhbiB7XG4gICAgLy8gTk9URTogaXQgaXMgbm90IHN1ZmZpY2llbnQgdG8gY2hlY2sgZm9yIGEgYGxpbmtgIHByb3BlcnR5XG4gICAgLy8gYXMgU3RyaW5nLnByb3RvdHlwZS5saW5rIGlzIGEgdmFsaWQgKGFsdGhvdWdoIGRlcHJlY2F0ZWQpIG1ldGhvZFxuICAgIHJldHVybiB0eXBlb2YgaXRlbSA9PT0gJ29iamVjdCdcbiAgICAgICYmIHR5cGVvZiAoaXRlbSBhcyBUb29sYmFyTGluayk/LmxpbmsgPT09ICdvYmplY3QnO1xuICB9XG5cbiAgZ2V0TGlua09wdGlvbnMoaXRlbTogVG9vbGJhckl0ZW0pOiBQYXJ0aWFsPFRvb2xiYXJMaW5rT3B0aW9ucz4ge1xuICAgIHJldHVybiAoaXRlbSBhcyBUb29sYmFyTGluayk/Lmxpbms7XG4gIH1cblxuICBuZ09uSW5pdCgpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuZWRpdG9yKSB7XG4gICAgICB0aHJvdyBuZXcgTmd4RWRpdG9yRXJyb3IoJ1JlcXVpcmVkIGVkaXRvciBpbnN0YW5jZSB0byBpbml0aWFsaXplIG1lbnUgY29tcG9uZW50Jyk7XG4gICAgfVxuXG4gICAgdGhpcy5tZW51U2VydmljZS5lZGl0b3IgPSB0aGlzLmVkaXRvcjtcbiAgfVxufVxuIiwiPGRpdlxuICBjbGFzcz1cIk5neEVkaXRvcl9fTWVudUJhclwiXG4gIFtuZ0NsYXNzXT1cInsgJ05neEVkaXRvci0tRGlzYWJsZWQnOiBkaXNhYmxlZCwgJ05neEVkaXRvcl9fTWVudUJhci0tUmV2ZXJzZSc6IGRyb3Bkb3duUGxhY2VtZW50ID09PSAndG9wJyB9XCJcbj5cbiAgPG5nLWNvbnRhaW5lciAqbmdGb3I9XCJsZXQgdG9vbGJhckl0ZW0gb2YgdG9vbGJhcjsgbGV0IGxhc3RUb29sYmFySXRlbSA9IGxhc3Q7IHRyYWNrQnk6IHRyYWNrQnlJbmRleFwiPlxuICAgIDxuZy1jb250YWluZXIgKm5nRm9yPVwibGV0IGl0ZW0gb2YgdG9vbGJhckl0ZW07IGxldCBsYXN0SXRlbSA9IGxhc3Q7IHRyYWNrQnk6IHRyYWNrQnlJbmRleFwiPlxuICAgICAgPCEtLSB0b2dnbGUgaWNvbnMgLS0+XG4gICAgICA8bmd4LXRvZ2dsZS1jb21tYW5kIFt0b29sYmFySXRlbV09XCJpdGVtXCIgW2NsYXNzXT1cImljb25Db250YWluZXJDbGFzc1wiICpuZ0lmPVwidG9nZ2xlQ29tbWFuZHMuaW5jbHVkZXMoaXRlbSlcIj5cbiAgICAgIDwvbmd4LXRvZ2dsZS1jb21tYW5kPlxuXG4gICAgICA8bmd4LWluc2VydC1jb21tYW5kIFt0b29sYmFySXRlbV09XCJpdGVtXCIgW2NsYXNzXT1cImljb25Db250YWluZXJDbGFzc1wiICpuZ0lmPVwiaW5zZXJ0Q29tbWFuZHMuaW5jbHVkZXMoaXRlbSlcIj5cbiAgICAgIDwvbmd4LWluc2VydC1jb21tYW5kPlxuXG4gICAgICA8IS0tIGxpbmsgLS0+XG4gICAgICA8bmctY29udGFpbmVyICpuZ0lmPVwiaXNMaW5rSXRlbShpdGVtKVwiPlxuICAgICAgICA8bmd4LWxpbmsgW2NsYXNzXT1cImljb25Db250YWluZXJDbGFzc1wiIFtvcHRpb25zXT1cImdldExpbmtPcHRpb25zKGl0ZW0pXCI+PC9uZ3gtbGluaz5cbiAgICAgIDwvbmctY29udGFpbmVyPlxuXG4gICAgICA8IS0tIGltYWdlIC0tPlxuICAgICAgPG5neC1pbWFnZSBbY2xhc3NdPVwiaWNvbkNvbnRhaW5lckNsYXNzXCIgKm5nSWY9XCJpdGVtID09PSAnaW1hZ2UnXCI+IDwvbmd4LWltYWdlPlxuXG4gICAgICA8IS0tIGRyb3Bkb3duIC0tPlxuICAgICAgPG5nLWNvbnRhaW5lciAqbmdJZj1cImlzRHJvcERvd24oaXRlbSlcIj5cbiAgICAgICAgPG5neC1kcm9wZG93blxuICAgICAgICAgICpuZ0Zvcj1cImxldCBkcm9wZG93bkl0ZW0gb2YgZ2V0RHJvcGRvd25JdGVtcyhpdGVtKSB8IGtleXZhbHVlOyB0cmFja0J5OiB0cmFja0J5SW5kZXhcIlxuICAgICAgICAgIFtjbGFzc109XCJkcm9wZG93bkNvbnRhaW5lckNsYXNzXCJcbiAgICAgICAgICBbZ3JvdXBdPVwiZHJvcGRvd25JdGVtLmtleVwiXG4gICAgICAgICAgW2l0ZW1zXT1cImRyb3Bkb3duSXRlbS52YWx1ZVwiXG4gICAgICAgID5cbiAgICAgICAgPC9uZ3gtZHJvcGRvd24+XG4gICAgICA8L25nLWNvbnRhaW5lcj5cblxuICAgICAgPCEtLSB0ZXh0IGNvbG9yIHBpY2tlciAtLT5cbiAgICAgIDxuZ3gtY29sb3ItcGlja2VyXG4gICAgICAgIFtjbGFzc109XCJpY29uQ29udGFpbmVyQ2xhc3NcIlxuICAgICAgICAqbmdJZj1cIml0ZW0gPT09ICd0ZXh0X2NvbG9yJ1wiXG4gICAgICAgIHR5cGU9XCJ0ZXh0X2NvbG9yXCJcbiAgICAgICAgW3ByZXNldHNdPVwicHJlc2V0c1wiXG4gICAgICA+XG4gICAgICA8L25neC1jb2xvci1waWNrZXI+XG4gICAgICA8IS0tIGJhY2tncm91bmQgY29sb3IgcGlja2VyIC0tPlxuICAgICAgPG5neC1jb2xvci1waWNrZXJcbiAgICAgICAgW2NsYXNzXT1cImljb25Db250YWluZXJDbGFzc1wiXG4gICAgICAgICpuZ0lmPVwiaXRlbSA9PT0gJ2JhY2tncm91bmRfY29sb3InXCJcbiAgICAgICAgdHlwZT1cImJhY2tncm91bmRfY29sb3JcIlxuICAgICAgICBbcHJlc2V0c109XCJwcmVzZXRzXCJcbiAgICAgID5cbiAgICAgIDwvbmd4LWNvbG9yLXBpY2tlcj5cblxuICAgICAgPCEtLSBzZXBlcmF0b3IgLS0+XG4gICAgICA8ZGl2IFtjbGFzc109XCJzZXBlcmF0b3JDbGFzc1wiICpuZ0lmPVwibGFzdEl0ZW0gJiYgIWxhc3RUb29sYmFySXRlbVwiPjwvZGl2PlxuICAgIDwvbmctY29udGFpbmVyPlxuICA8L25nLWNvbnRhaW5lcj5cblxuICA8IS0tIGN1c3RvbSBtZW51IC0tPlxuICA8bmctY29udGFpbmVyICpuZ0lmPVwiY3VzdG9tTWVudVJlZlwiPlxuICAgIDxuZy1jb250YWluZXIgW25nVGVtcGxhdGVPdXRsZXRdPVwiY3VzdG9tTWVudVJlZlwiPjwvbmctY29udGFpbmVyPlxuICA8L25nLWNvbnRhaW5lcj5cbjwvZGl2PlxuIl19